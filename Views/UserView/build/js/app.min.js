function setQuantityField(a){a.forEach(function(a){a.displayable="",a.quantity=0})}function Toast(a){Materialize.toast(a,3e3)}function clear(a){setQuantityField(a.products),a.order={name:"",address:"",celNumber:"",payWith:null,total:0,items:[],additionalFields:{additionalNote:""}}}function makeCopy(a){return $.extend({},a)}var app=angular.module("userOrder",[]);console.log("The app is initializing ... "),app.controller("orderController",["$scope","$http",function(a,b){setQuantityField(fromServerItems),a.order=orderModel,a.products=fromServerItems,a.addItem=putItem,a.removeItem=removeItem,a.sendOrder=function(){console.log("The order will send with data : "),Toast("Su orden esta siendo enviada"),b.post("/sendOrder",a.order).then(responseCallback,errorCallback).then(function(b){b.data.isOk===!0&&clear(a)})}}]);var responseCallback=function(a){return a.data.isOk===!1?void errorCallback(a):(Toast("Listo ! espere la confirmacion"),console.dir(a),a)},errorCallback=function(a){return Toast("Hubo un error al tratar de enviar :("),console.log("Was an error !!!!!"),console.dir(a),a},putItem=function(a,b){var c=findByName(a.name,b);if(void 0===c)itemBag={name:a.name,quantity:1},b.items.push(itemBag);else{var d=b.items.indexOf(c);itemBag=b.items[d],itemBag.quantity+=1}a.quantity=itemBag.quantity,a.displayable=a.quantity>0?"displayable":"",b.total+=a.price,console.log("The order now : "),console.dir(b)},removeItem=function(a,b){var c=findByName(a.name,b);if(void 0!==c){var d=b.items.indexOf(c);itemBag=b.items[d],c.quantity<=1?(1==c.quantity&&(b.total-=a.price),b.items.splice(d,1),itemBag.quantity=0):(itemBag.quantity-=1,b.total-=a.price),a.quantity=itemBag.quantity,a.displayable=a.quantity>0?"displayable":""}else console.error("El resultado de la busqueda es indefinido !");console.log("The order now : "),console.dir(b)},findByName=function(a,b){return b.items.find(function(b){return b.name===a})},orderModel={name:"",address:"",celNumber:"",payWith:null,total:0,items:[],additionalFields:{additionalNote:""}},itemBag={name:"",quantity:0},pizzaModel={name:"",description:"",price:""},fromServerItems=[{name:"Muzzarella",description:"Muzzarella , Salsa de Tomate , Aceitunas , Oregano",price:80},{name:"Muzzarella ( Chica )",description:"Muzzarella , Salsa de Tomate , Aceitunas , Oregano",price:60},{name:"Napolitana",description:"Queso , Salsa de Tomate , Aceitunas , Oregano , Rodajas de Tomate",price:90},{name:"Napolitana ( Chica )",description:"Queso , Salsa de Tomate , Aceitunas , Oregano , Rodajas de Tomate",price:70},{name:"Fugazzeta",description:"Queso , Salsa de Tomate , Aceitunas , Oregano , Cebolla en tiras",price:95},{name:"Fugazzeta ( Chica )",description:"Queso , Salsa de Tomate , Aceitunas , Oregano , Cebolla en tiras",price:75},{name:"Especial",description:"Muzzarella , Salsa de Tomate , Aceitunas , Oregano , Jamon , Tomates",price:100},{name:"Especial ( Chica )",description:"Muzzarella , Salsa de Tomate , Aceitunas , Oregano , Jamon , Tomates",price:80},{name:"Anana",description:"Muzzarella , Salsa de Tomate , Aceitunas , Oregano , Rodajas de Anana",price:100},{name:"Anana ( Chica )",description:"Muzzarella , Salsa de Tomate , Aceitunas , Oregano , Rodajas de Anana ",price:80}];